wait(0.5)
main = {
    windows = {};
}

local filename = "SavedTotalSpins.json"
local default = {
Spins = 0
}
local JSON

if not pcall(function() readfile(filename) end) then writefile(filename, game:GetService("HttpService"):JSONEncode(default)) end 

main.Settings = game:GetService("HttpService"):JSONDecode(readfile(filename))
main.TotalSpins = main.Settings.Spins
function save()
    main.Settings.Spins = main.TotalSpins
    writefile(filename,game:GetService("HttpService"):JSONEncode(main.Settings))
end

spawn(function()
    while wait(10) do
        save()
    end
end)

main.values = {}

main.functions = {}

main.WantedElements = {}

print("---------------Wanted Elements-----------------")
for i, v in pairs(getgenv().WantedElements) do
    table.insert(main.WantedElements, v)
    print(v)
end
print("------------------------------------------------")
function main.functions.Click()
    local VS = game:GetService("VirtualUser")
    VS:CaptureController()
    VS:ClickButton1(Vector2.new())
end

local library = loadstring(game:HttpGet(('https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wall%20v3')))()

main.windows.window1 = {}

main.windows.window1.Gui = library:CreateWindow("Autofarm")
main.windows.window1.folder1 = main.windows.window1.Gui:CreateFolder("Options")


main.windows.window1.folder1:Toggle("Element Farm", function(state)
    main.values.ElementFarm = state
end)

main.windows.window1.folder1:Toggle("Level Farm", function(state)
    main.values.LevelFarm = state
end)

main.Song = Instance.new("Sound")
main.Song.Looped = false
main.Song.SoundId = "rbxassetid://204032720"
main.Song.Parent = game.CoreGui
main.Song.Volume = 2

main.windows.window1.folder1:Toggle("Sound Notification if I get wanted element", function(state)
    main.SoundNotif = state
end)

main.windows.window1.folder1:Button("Play Notification", function()
    main.Song:Play()
end)

main.Events = {}

main.ServerSpins = 0

main.Events.GetElement = game:GetService("ReplicatedStorage").Client.GetElement
main.Events.Spin = game:GetService("ReplicatedStorage").Client.Spin
main.Events.GetSpins = game:GetService("ReplicatedStorage").Client.GetSpins
main.IntroGui = game:GetService("Players").LocalPlayer.PlayerGui.IntroGui
main.currentElement = tostring(main.Events.GetElement:InvokeServer())

local VS = game:GetService("VirtualUser")

function main.functions.Spin()
    game.Players.LocalPlayer.Character.Humanoid.Health = 0
    repeat 
        wait()
        game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("IntroGui") 
    until game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Enabled == true
    wait()
    main.Events.Spin:InvokeServer()
    main.ServerSpins += 1
    main.TotalSpins += 1
    wait()
    main.currentElement = tostring(main.Events.GetElement:InvokeServer())
    print("New Element: "..main.currentElement..", Spins Remaining: "..tostring(main.Events.GetSpins:InvokeServer()).."  ||||  Spinned: "..tostring(main.ServerSpins).." Times, Total Spins: "..tostring(main.TotalSpins))
    if table.find(main.WantedElements, main.currentElement) ~= nil then
        print("Wanted Element Obtained.")
        main.values.ElementFarm = "Done"
        if main.SoundNotif then
            main.Song:Play()
        end
    end
    wait(0.1)
    repeat wait() until game.Players.LocalPlayer.Character.Humanoid.Health > 0 
end

main.FarmPart = Instance.new("Part")
main.FarmPart.Parent = workspace
main.FarmPart.Anchored = true
main.FarmPart.Transparency = 1
main.FarmPart.CanCollide = true
main.FarmPart.Position = Vector3.new(math.random(0,20), math.random(5000,10000), math.random(0,20))
main.FarmPart.Size = Vector3.new(math.random(90,150),math.random(1,10),math.random(90,150))

function main.functions.SpawnIfPossible()
    if game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Enabled == true then
        firesignal(game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Continue.MouseButton1Click)
        repeat 
            wait()
            game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("IntroGui")
            if game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Enabled == true then
                firesignal(game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Continue.MouseButton1Click)
                wait(0.5)
            end
        until game:GetService("Players").LocalPlayer.PlayerGui.IntroGui.Enabled == false
        wait(0.5)
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = main.FarmPart.CFrame + Vector3.new(0,11,0)
    else
        if (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - main.FarmPart.Position).magnitude >= 150 then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = main.FarmPart.CFrame + Vector3.new(0,11,0)
        end
    end
end


game.Players.LocalPlayer.Idled:Connect(function()
    VS:CaptureController()
    VS:ClickButton2(Vector2.new())
end)


while wait() do
    if main.values.ElementFarm == true and not table.find(main.WantedElements, main.currentElement) then
        pcall(function()
            if table.find(main.WantedElements, main.currentElement) then
                main.values.ElementFarm = "Done"
                if main.SoundNotif then
                    main.Song:Play()
                end
                print("-------------------------------Wanted element obtained--------------------------------------------------------------------------------------------------------------------------")
            end

            if main.Events.GetSpins:InvokeServer() >= 1 and not table.find(main.WantedElements, main.currentElement) then
                if not game:GetService("Players").LocalPlayer:FindFirstChild("SpinCooldown") then
                    main.functions.Spin()
                end
                if table.find(main.WantedElements, main.currentElement) ~= nil then
                    if main.SoundNotif then
                        main.Song:Play()
                    end
                    print("-----------------------------------Wanted Element Obtained.-------------------------------------------------------------------------------------------------------------------------")
                    main.values.ElementFarm = "Done"
                end
            else
                main.functions.SpawnIfPossible()
                local a = game:GetService("Players").LocalPlayer.PlayerGui.StatsGui.BarsFrame.Level
                local str = a.Text:gsub("Level ", "")
                local level = tonumber(str)
                if level >= 2 and not table.find(main.WantedElements, main.currentElement) then
                    main.functions.Spin()
                    if table.find(main.WantedElements, main.currentElement) ~= nil then
                        if main.SoundNotif then
                            main.Song:Play()
                        end
                        print("-----------------------------------------------Wanted Element Obtained.------------------------------------------------------------------------------------------------------------------")
                        main.values.ElementFarm = "Done"
                    end
                else
                    for i, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                        if v:IsA("Tool") then
                            v.Parent = game.Players.LocalPlayer.Backpack
                        end
                    end

                    for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                        if not v.Name:find(")") then
                            v.Parent = game.Players.LocalPlayer.Character
                            wait()
                            main.functions.Click()
                            v.Parent = game.Players.LocalPlayer.Backpack
                        end
                    end
                end
            end
        end)
    else
        if table.find(main.WantedElements, main.currentElement) and main.values.ElementFarm ~= "Done" then
            main.values.ElementFarm = "Done"
            if main.SoundNotif then
                main.Song:Play()
            end
            print("---------------Wanted Element is alrdy equipped.-------------------")
        end
    end

    if main.values.LevelFarm and main.values.ElementFarm ~= true then
        pcall(function()
            main.functions.SpawnIfPossible()

            for i, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                if v:IsA("Tool") then
                    v.Parent = game.Players.LocalPlayer.Backpack
                end
            end

            for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                if not v.Name:find(")") then
                    v.Parent = game.Players.LocalPlayer.Character
                    wait()
                    main.functions.Click()
                    v.Parent = game.Players.LocalPlayer.Backpack
                end
            end
        end)
    end
end
